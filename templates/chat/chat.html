
{% extends "base.html" %}

{% load static %}
{% block header %}
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}TrustBuySell{% endblock %}</title>
<!-- <link rel="stylesheet" href="{% static 'css/main.css' %}"> -->
<style>
  
.chat-box {
  max-width: 600px;
  margin: auto;
  background: #fff;
  border-radius: 8px;
  padding: 20px;
}

.messages {
  height: 400px;
  overflow-y: auto;
  border: 1px solid #ddd;
  padding: 10px;
}

.message {
  margin: 8px 0;
  padding: 10px;
  border-radius: 8px;
}

.message.sent {
  background: #dcf8c6;
  text-align: right;
}

.message.received {
  background: #f1f1f1;
}

form textarea {
  width: 100%;
  height: 60px;
  border-radius: 8px;
  margin-top: 10px;
  padding: 10px;
}

button {
  background: #007bff;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  margin-top: 8px;
}
</style>
{% include "header.html"%}
{% endblock %}

{% block content %}
<main class="section">
  <h2>Your Conversations</h2>
  {% if chats %}
    <ul class="chat-list">
      {% for chat in chats %}
        <li>
          <a href="{% url 'chat_detail' chat.id %}">
            <strong>{{ chat.other_user(request.user).username }}</strong>
            <span class="muted">Last message: {{ chat.last_message.content|truncatechars:40 }}</span>
          </a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No conversations yet.</p>
  {% endif %}
</main>
{% endblock %}
