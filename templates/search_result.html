{% extends "base.html" %}
{% load static %}
  {% block header %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Search Result Page {% endblock %}</title>
    {% include "header.html"%}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/search_rp.css' %}">
    {% endblock %}

{% block content %}
  <main>
    <h2>Search Results for “{{ query }}”</h2>

    {% if products %}
    <div class="grid">
      {% for product in products %}
      <article class="card">
        <div class="media">
          <img src="{{ product.product_image.image.url }}" alt="{{ product.title }}">
        </div>
        <div class="body">
          <div class="p-title">{{ product.title }}</div>
          <div class="muted">{{ product.category.name }}</div>
          <div class="price">₦{{ product.discountedprice|floatformat:0 }}</div>
          <div class="actions">
            <a class="btn btn-accent" href="{% url 'add-to-cart' product.id %}">Add to Cart</a>
            <a class="btn btn-outline" href="{% url 'product_detail' product.slug %}">View</a>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>
    {% else %}
    <p class="muted">No products found matching your search.</p>
    {% endif %}
  </main>
  

{% endblock %}